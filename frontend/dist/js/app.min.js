!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=82)}([function(t,e,n){var i=n(2),r=n(4);t.exports=function(t){return function e(n,s){switch(arguments.length){case 0:return e;case 1:return r(n)?e:i((function(e){return t(n,e)}));default:return r(n)&&r(s)?e:r(n)?i((function(e){return t(e,s)})):r(s)?i((function(e){return t(n,e)})):t(n,s)}}}},function(t,e){t.exports=function(t){return function(e){var n=(e=e||{}).scope||{},i=e.tag||function(t,...e){return t.reduce((t,n,i)=>t+e[i-1]+n)},r=Object.keys(n).join(",");r=r.length?","+r:"";var s=new Function("tag"+r,"return "+t);return e.scope?s(i,...Object.values(n)):s.apply(this,[i])}}},function(t,e,n){var i=n(4);t.exports=function(t){return function e(n){return 0===arguments.length||i(n)?e:t.apply(this,arguments)}}},function(t,e){t.exports=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}},function(t,e){t.exports=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,i){return e.apply(this,arguments)};case 4:return function(t,n,i,r){return e.apply(this,arguments)};case 5:return function(t,n,i,r,s){return e.apply(this,arguments)};case 6:return function(t,n,i,r,s,a){return e.apply(this,arguments)};case 7:return function(t,n,i,r,s,a,o){return e.apply(this,arguments)};case 8:return function(t,n,i,r,s,a,o,l){return e.apply(this,arguments)};case 9:return function(t,n,i,r,s,a,o,l,c){return e.apply(this,arguments)};case 10:return function(t,n,i,r,s,a,o,l,c,u){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},function(t,e,n){var i=n(2),r=n(0),s=n(4);t.exports=function(t){return function e(n,a,o){switch(arguments.length){case 0:return e;case 1:return s(n)?e:r((function(e,i){return t(n,e,i)}));case 2:return s(n)&&s(a)?e:s(n)?r((function(e,n){return t(e,a,n)})):s(a)?r((function(e,i){return t(n,e,i)})):i((function(e){return t(n,a,e)}));default:return s(n)&&s(a)&&s(o)?e:s(n)&&s(a)?r((function(e,n){return t(e,n,o)})):s(n)&&s(o)?r((function(e,n){return t(e,a,n)})):s(a)&&s(o)?r((function(e,i){return t(n,e,i)})):s(n)?i((function(e){return t(e,a,o)})):s(a)?i((function(e){return t(n,e,o)})):s(o)?i((function(e){return t(n,a,e)})):t(n,a,o)}}}},function(t,e){t.exports=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){return"[object String]"===Object.prototype.toString.call(t)}},function(t,e,n){var i=n(2),r=n(8),s=i((function(t){return r(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));t.exports=s},function(t,e,n){var i=n(2),r=n(3),s=n(63),a=!{toString:null}.propertyIsEnumerable("toString"),o=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],l=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),c=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},u="function"!=typeof Object.keys||l?i((function(t){if(Object(t)!==t)return[];var e,n,i=[],u=l&&s(t);for(e in t)!r(e,t)||u&&"length"===e||(i[i.length]=e);if(a)for(n=o.length-1;n>=0;)r(e=o[n],t)&&!c(i,e)&&(i[i.length]=e),n-=1;return i})):i((function(t){return Object(t)!==t?[]:Object.keys(t)}));t.exports=u},function(t,e,n){var i=n(40),r=n(0)((function(t,e){return i({},t,e)}));t.exports=r},function(t,e,n){var i=n(0)((function(t,e){return Array.prototype.slice.call(e,0).sort((function(e,n){var i=t(e),r=t(n);return i<r?-1:i>r?1:0}))}));t.exports=i},function(t,e,n){var i=n(41),r=n(9);t.exports=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return i.apply(this,r(arguments))}},function(t,e,n){var i=n(44),r=n(45),s=n(46);function a(t,e,n){for(var i=n.next();!i.done;){if((e=t["@@transducer/step"](e,i.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}i=n.next()}return t["@@transducer/result"](e)}function o(t,e,n,i){return t["@@transducer/result"](n[i](s(t["@@transducer/step"],t),e))}var l="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";t.exports=function(t,e,n){if("function"==typeof t&&(t=r(t)),i(n))return function(t,e,n){for(var i=0,r=n.length;i<r;){if((e=t["@@transducer/step"](e,n[i]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}i+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return o(t,e,n,"fantasy-land/reduce");if(null!=n[l])return a(t,e,n[l]());if("function"==typeof n.next)return a(t,e,n);if("function"==typeof n.reduce)return o(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}},function(t,e,n){var i=n(7);t.exports=function(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return i(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}},function(t,e,n){var i=n(49)(0,"toLowerCase");t.exports=i},function(t,e){t.exports=function(t){return"[object Object]"===Object.prototype.toString.call(t)}},function(t,e,n){var i=n(0),r=n(76),s=i((function(t,e){return r([t],e)}));t.exports=s},function(t,e,n){var i=n(0),r=n(80),s=i((function(t,e){return r((function(t,e,n){return e}),t,e)}));t.exports=s},function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function h(t,e,n,i){var r,s,a,o;if(c(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]),void 0===a)a=s[e]=n,++t._eventsCount;else if("function"==typeof a?a=s[e]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=u(t))>0&&a.length>r&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,o=l,console&&console.warn&&console.warn(o)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=d.bind(i);return r.listener=n,i.wrapFn=r,r}function f(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):m(r,r.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)s(l,this,e);else{var c=l.length,u=m(l,c);for(n=0;n<c;++n)s(u[n],this,e)}return!0},o.prototype.addListener=function(t,e){return h(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return h(this,t,e,!0)},o.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,i,r,s,a;if(c(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},o.prototype.listeners=function(t){return f(this,t,!0)},o.prototype.rawListeners=function(t){return f(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(t,e,n){t.exports=n(1)('tag(function() {\n  var strings = ["<div class=\\"nbb-root\\"></div>\\n"];\n  strings.raw = ["<div class=\\"nbb-root\\"></div>\\n"];\n  return strings;\n}())')},function(t,e,n){t.exports=n(1)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-folder\\">\\n    <div class=\\"nbb-folder-folders\\" data-folders></div>\\n    <div class=\\"nbb-folder-files-options\\" data-files-options></div>\\n    <div class=\\"nbb-folder-files\\" data-files></div>\\n    <div class=\\"nbb-folder-latest\\" data-latest></div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-folder\\">\\n    <div class=\\"nbb-folder-folders\\" data-folders></div>\\n    <div class=\\"nbb-folder-files-options\\" data-files-options></div>\\n    <div class=\\"nbb-folder-files\\" data-files></div>\\n    <div class=\\"nbb-folder-latest\\" data-latest></div>\\n</div>\\n"\n    ];\n\n    return strings;\n}())')},function(t,e,n){t.exports=n(1)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-folder__folder-item\\">\\n    <div class=\\"nbb-folder__folder-item__name\\">\\n        ",\n        "\\n        <span class=\\"nbb-folder__folder-item__imagescount\\">",\n        "</span>\\n        ",\n        "\\n    </div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-folder__folder-item\\">\\n    <div class=\\"nbb-folder__folder-item__name\\">\\n        ",\n        "\\n        <span class=\\"nbb-folder__folder-item__imagescount\\">",\n        "</span>\\n        ",\n        "\\n    </div>\\n</div>\\n"\n    ];\n\n    return strings;\n}(), name, count.images, count.folders > 0 ? "<span class=\\"nbb-folder__folder-item__folderscount\\">" + count.folders + "</span>" : \'\')')},function(t,e,n){t.exports=n(1)('tag(function() {\n    var strings = ["<div class=\\"nbb-folder__folder-item__image\\">\\n    <img>\\n</div>\\n\\n"];\n    strings.raw = ["<div class=\\"nbb-folder__folder-item__image\\">\\n    <img>\\n</div>\\n\\n"];\n    return strings;\n}())')},function(t,e,n){t.exports=n(1)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-folder__image-item\\">\\n    <div class=\\"nbb-folder__image-item__name\\">",\n        "</div>\\n    <div class=\\"nbb-folder__image-item__image\\">\\n        <img>\\n    </div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-folder__image-item\\">\\n    <div class=\\"nbb-folder__image-item__name\\">",\n        "</div>\\n    <div class=\\"nbb-folder__image-item__image\\">\\n        <img>\\n    </div>\\n</div>\\n"\n    ];\n\n    return strings;\n}(), name)')},function(t,e,n){t.exports=n(1)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-folder__image-item__stats\\">\\n    <div class=\\"\\" data-number></div>\\n    <div class=\\"\\" data-left></div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-folder__image-item__stats\\">\\n    <div class=\\"\\" data-number></div>\\n    <div class=\\"\\" data-left></div>\\n</div>\\n"\n    ];\n\n    return strings;\n}())')},function(t,e,n){t.exports=n(1)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-folder-files-options__selection\\">\\n    <div class=\\"nbb-folder-files-options__picking-mode\\">\\n        <button data-picking-mode>PICKING MODE</button>\\n    </div>\\n    <div class=\\"nbb-folder-files-options__selection-group\\">\\n        <button data-selection-all>ALL</button>\\n        <button data-selection-none>NONE</button>\\n        <button data-selection-invert>INVERT</button>\\n    </div>\\n    <div class=\\"nbb-folder-files-options__latest\\">\\n        <button data-load-latest>LATEST</button>\\n    </div>\\n</div>\\n\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-folder-files-options__selection\\">\\n    <div class=\\"nbb-folder-files-options__picking-mode\\">\\n        <button data-picking-mode>PICKING MODE</button>\\n    </div>\\n    <div class=\\"nbb-folder-files-options__selection-group\\">\\n        <button data-selection-all>ALL</button>\\n        <button data-selection-none>NONE</button>\\n        <button data-selection-invert>INVERT</button>\\n    </div>\\n    <div class=\\"nbb-folder-files-options__latest\\">\\n        <button data-load-latest>LATEST</button>\\n    </div>\\n</div>\\n\\n"\n    ];\n\n    return strings;\n}())')},function(t,e,n){t.exports=n(1)('tag(function() {\n  var strings = ["<div class=\\"nbb-pagetitle\\"></div>\\n"];\n  strings.raw = ["<div class=\\"nbb-pagetitle\\"></div>\\n"];\n  return strings;\n}())')},function(t,e,n){t.exports=n(1)('tag(function() {\n  var strings = ["<div class=\\"nbb-breadcrump\\"></div>\\n"];\n  strings.raw = ["<div class=\\"nbb-breadcrump\\"></div>\\n"];\n  return strings;\n}())')},function(t,e,n){t.exports=n(1)('tag(function() {\n  var strings = ["<button>", "</button>\\n"];\n  strings.raw = ["<button>", "</button>\\n"];\n  return strings;\n}(), name)')},function(t,e,n){t.exports=n(1)('tag(function() {\n  var strings = ["<div class=\\"nbb-imageviewer\\"></div>\\n"];\n  strings.raw = ["<div class=\\"nbb-imageviewer\\"></div>\\n"];\n  return strings;\n}())')},function(t,e,n){t.exports=n(1)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-imageviewer__image-item\\">\\n    <div class=\\"nbb-imageviewer__image-item__name\\">",\n        "</div>\\n    <div class=\\"nbb-imageviewer__image-item__image\\">\\n        <picture>\\n            ",\n        "\\n            <img src=\\"\\">\\n        </picture>\\n    </div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-imageviewer__image-item\\">\\n    <div class=\\"nbb-imageviewer__image-item__name\\">",\n        "</div>\\n    <div class=\\"nbb-imageviewer__image-item__image\\">\\n        <picture>\\n            ",\n        "\\n            <img src=\\"\\">\\n        </picture>\\n    </div>\\n</div>\\n"\n    ];\n\n    return strings;\n}(), name, thumbnails.map(t => "\\n            <source srcset=\\"" + t.url + "\\" media=\\"" + t.media + "\\">\\n            ").join(\'\'))')},function(t,e,n){t.exports=n(1)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-imageviewer__controls\\">\\n    <button class=\\"nbb-imageviewer__controls__prev\\" data-prev>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__next\\" data-next>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__close\\" data-close>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"94.926px\\"\\n             height=\\"94.926px\\"\\n             viewBox=\\"0 0 94.926 94.926\\">\\n            <path d=\\"M55.931,47.463L94.306,9.09c0.826-0.827,0.826-2.167,0-2.994L88.833,0.62C88.436,0.224,87.896,0,87.335,0\\n        c-0.562,0-1.101,0.224-1.498,0.62L47.463,38.994L9.089,0.62c-0.795-0.795-2.202-0.794-2.995,0L0.622,6.096\\n        c-0.827,0.827-0.827,2.167,0,2.994l38.374,38.373L0.622,85.836c-0.827,0.827-0.827,2.167,0,2.994l5.473,5.476\\n        c0.397,0.396,0.936,0.62,1.498,0.62s1.1-0.224,1.497-0.62l38.374-38.374l38.374,38.374c0.397,0.396,0.937,0.62,1.498,0.62\\n        s1.101-0.224,1.498-0.62l5.473-5.476c0.826-0.827,0.826-2.167,0-2.994L55.931,47.463z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__layout up\\" data-layout>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n</div>\\n\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-imageviewer__controls\\">\\n    <button class=\\"nbb-imageviewer__controls__prev\\" data-prev>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__next\\" data-next>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__close\\" data-close>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"94.926px\\"\\n             height=\\"94.926px\\"\\n             viewBox=\\"0 0 94.926 94.926\\">\\n            <path d=\\"M55.931,47.463L94.306,9.09c0.826-0.827,0.826-2.167,0-2.994L88.833,0.62C88.436,0.224,87.896,0,87.335,0\\n        c-0.562,0-1.101,0.224-1.498,0.62L47.463,38.994L9.089,0.62c-0.795-0.795-2.202-0.794-2.995,0L0.622,6.096\\n        c-0.827,0.827-0.827,2.167,0,2.994l38.374,38.373L0.622,85.836c-0.827,0.827-0.827,2.167,0,2.994l5.473,5.476\\n        c0.397,0.396,0.936,0.62,1.498,0.62s1.1-0.224,1.497-0.62l38.374-38.374l38.374,38.374c0.397,0.396,0.937,0.62,1.498,0.62\\n        s1.101-0.224,1.498-0.62l5.473-5.476c0.826-0.827,0.826-2.167,0-2.994L55.931,47.463z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__layout up\\" data-layout>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n</div>\\n\\n"\n    ];\n\n    return strings;\n}())')},function(t,e,n){t.exports=n(1)('tag(function() {\n  var strings = ["<div class=\\"nbb-imageviewer__stripe\\"></div>\\n"];\n  strings.raw = ["<div class=\\"nbb-imageviewer__stripe\\"></div>\\n"];\n  return strings;\n}())')},function(t,e,n){t.exports=n(1)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-imageviewer__stripe__stripe-item\\">\\n    <div class=\\"nbb-imageviewer__stripe__stripe-item__image\\">\\n        <img>\\n        \x3c!--<picture>\\n            ",\n        "\\n            <img src=\\"\\">\\n        </picture>--\x3e\\n    </div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-imageviewer__stripe__stripe-item\\">\\n    <div class=\\"nbb-imageviewer__stripe__stripe-item__image\\">\\n        <img>\\n        \x3c!--<picture>\\n            ",\n        "\\n            <img src=\\"\\">\\n        </picture>--\x3e\\n    </div>\\n</div>\\n"\n    ];\n\n    return strings;\n}(), thumbnails.map(t => "<source srcset=\\"" + t.url + "\\" media=\\"" + t.media + "\\">").join(\'\'))')},function(t,e,n){var i=n(37),r=n(38);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var s={insert:"head",singleton:!1};i(r,s);t.exports=r.locals||{}},function(t,e,n){"use strict";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},s=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a=[];function o(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},i=[],r=0;r<t.length;r++){var s=t[r],l=e.base?s[0]+e.base:s[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var h=o(u),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(a[h].references++,a[h].updater(d)):a.push({identifier:u,updater:m(d,e),references:1}),i.push(u)}return i}function c(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var a=s(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var u,h=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function d(t,e,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=h(e,r);else{var s=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(s,a[e]):t.appendChild(s)}}function p(t,e,n){var i=n.css,r=n.media,s=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),s&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var f=null,g=0;function m(t,e){var n,i,r;if(e.singleton){var s=g++;n=f||(f=c(e)),i=d.bind(null,n,s,!1),r=d.bind(null,n,s,!0)}else n=c(e),i=p.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var r=o(n[i]);a[r].references--}for(var s=l(t,e),c=0;c<n.length;c++){var u=o(n[c]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}n=s}}}},function(t,e,n){t.exports=n.p+"css/app.min.css"},function(t,e){window.toDOM=t=>(new DOMParser).parseFromString(t,"text/html").documentElement.querySelector("body").firstChild,window.wait=t=>new Promise(e=>{setTimeout(()=>{e()},t)}),window.randomInt=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t),window.ksortObjArray=(t,e)=>t.sort((t,n)=>{let i=0;return t[e]>n[e]?i=1:t[e]<n[e]&&(i=-1),i})},function(t,e,n){var i=n(3);t.exports="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var s=arguments[n];if(null!=s)for(var a in s)i(a,s)&&(e[a]=s[a]);n+=1}return e}},function(t,e,n){var i=n(5),r=n(42),s=n(43),a=n(47);t.exports=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return i(arguments[0].length,s(r,arguments[0],a(arguments)))}},function(t,e){t.exports=function(t,e){return function(){return e.call(this,t.apply(this,arguments))}}},function(t,e,n){var i=n(6)(n(14));t.exports=i},function(t,e,n){var i=n(2),r=n(7),s=n(8),a=i((function(t){return!!r(t)||!!t&&("object"==typeof t&&(!s(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}));t.exports=a},function(t,e){var n=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();t.exports=function(t){return new n(t)}},function(t,e,n){var i=n(5),r=n(0)((function(t,e){return i(t.length,(function(){return t.apply(e,arguments)}))}));t.exports=r},function(t,e,n){var i=n(15),r=n(2)(i("tail",n(48)(1,1/0)));t.exports=r},function(t,e,n){var i=n(15),r=n(6)(i("slice",(function(t,e,n){return Array.prototype.slice.call(n,t,e)})));t.exports=r},function(t,e,n){var i=n(0),r=n(50),s=n(51),a=n(53),o=i((function(t,e){return s(t+1,(function(){var n=arguments[t];if(null!=n&&r(n[e]))return n[e].apply(n,Array.prototype.slice.call(arguments,0,t));throw new TypeError(a(n)+' does not have a method named "'+e+'"')}))}));t.exports=o},function(t,e){t.exports=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e}},function(t,e,n){var i=n(5),r=n(2),s=n(0),a=n(52),o=s((function(t,e){return 1===t?r(e):i(t,a(t,[],e))}));t.exports=o},function(t,e,n){var i=n(5),r=n(4);t.exports=function t(e,n,s){return function(){for(var a=[],o=0,l=e,c=0;c<n.length||o<arguments.length;){var u;c<n.length&&(!r(n[c])||o>=arguments.length)?u=n[c]:(u=arguments[o],o+=1),a[c]=u,r(u)||(l-=1),c+=1}return l<=0?s.apply(this,a):i(l,t(e,a,s))}}},function(t,e,n){var i=n(2),r=n(54),s=i((function(t){return r(t,[])}));t.exports=s},function(t,e,n){var i=n(55),r=n(65),s=n(66),a=n(67),o=n(10),l=n(68);t.exports=function t(e,n){var c=function(r){var s=n.concat([e]);return i(r,s)?"<Circular>":t(r,s)},u=function(t,e){return r((function(e){return s(e)+": "+c(t[e])}),e.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+r(c,e).join(", ")+"))";case"[object Array]":return"["+r(c,e).concat(u(e,l((function(t){return/^\d+$/.test(t)}),o(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+c(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?c(NaN):s(a(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+c(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+c(e.valueOf())+")":s(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var h=e.toString();if("[object Object]"!==h)return h}return"{"+u(e,o(e)).join(", ")+"}"}}},function(t,e,n){var i=n(56);t.exports=function(t,e){return i(e,t,0)>=0}},function(t,e,n){var i=n(57);t.exports=function(t,e,n){var r,s;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(s=t[n])&&1/s===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(s=t[n])&&s!=s)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(i(t[n],e))return n;n+=1}return-1}},function(t,e,n){var i=n(0),r=n(58),s=i((function(t,e){return r(t,e,[],[])}));t.exports=s},function(t,e,n){var i=n(59),r=n(60),s=n(61),a=n(3),o=n(62),l=n(10),c=n(64);function u(t,e,n,s){var a=i(t),o=i(e);function l(t,e){return h(t,e,n.slice(),s.slice())}return!r((function(t,e){return!r(l,e,t)}),o,a)}function h(t,e,n,i){if(o(t,e))return!0;var r=c(t);if(r!==c(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(r){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===s(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!o(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!o(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var d=n.length-1;d>=0;){if(n[d]===t)return i[d]===e;d-=1}switch(r){case"Map":return t.size===e.size&&u(t.entries(),e.entries(),n.concat([t]),i.concat([e]));case"Set":return t.size===e.size&&u(t.values(),e.values(),n.concat([t]),i.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var p=l(t);if(p.length!==l(e).length)return!1;var f=n.concat([t]),g=i.concat([e]);for(d=p.length-1;d>=0;){var m=p[d];if(!a(m,e)||!h(e[m],t[m],f,g))return!1;d-=1}return!0}t.exports=h},function(t,e){t.exports=function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}},function(t,e){t.exports=function(t,e,n){for(var i=0,r=n.length;i<r;){if(t(e,n[i]))return!0;i+=1}return!1}},function(t,e){t.exports=function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}},function(t,e){t.exports="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var i=n(3),r=Object.prototype.toString,s=function(){return"[object Arguments]"===r.call(arguments)?function(t){return"[object Arguments]"===r.call(t)}:function(t){return i("callee",t)}}();t.exports=s},function(t,e,n){var i=n(2)((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));t.exports=i},function(t,e){t.exports=function(t,e){for(var n=0,i=e.length,r=Array(i);n<i;)r[n]=t(e[n]),n+=1;return r}},function(t,e){t.exports=function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}},function(t,e){var n=function(t){return(t<10?"0":"")+t},i="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};t.exports=i},function(t,e,n){var i=n(69),r=n(0),s=n(70),a=r((function(t,e){return s(i(t),e)}));t.exports=a},function(t,e){t.exports=function(t){return function(){return!t.apply(this,arguments)}}},function(t,e,n){var i=n(0),r=n(71),s=n(73),a=n(17),o=n(14),l=n(74),c=n(10),u=i(r(["filter"],l,(function(t,e){return a(e)?o((function(n,i){return t(e[i])&&(n[i]=e[i]),n}),{},c(e)):s(t,e)})));t.exports=u},function(t,e,n){var i=n(7),r=n(72);t.exports=function(t,e,n){return function(){if(0===arguments.length)return n();var s=Array.prototype.slice.call(arguments,0),a=s.pop();if(!i(a)){for(var o=0;o<t.length;){if("function"==typeof a[t[o]])return a[t[o]].apply(a,s);o+=1}if(r(a)){var l=e.apply(null,s);return l(a)}}return n.apply(this,arguments)}}},function(t,e){t.exports=function(t){return null!=t&&"function"==typeof t["@@transducer/step"]}},function(t,e){t.exports=function(t,e){for(var n=0,i=e.length,r=[];n<i;)t(e[n])&&(r[r.length]=e[n]),n+=1;return r}},function(t,e,n){var i=n(0),r=n(75),s=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=r.init,t.prototype["@@transducer/result"]=r.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),a=i((function(t,e){return new s(t,e)}));t.exports=a},function(t,e){t.exports={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}}},function(t,e,n){var i=n(0),r=n(77),s=i((function(t,e){return r([t],e)[0]}));t.exports=s},function(t,e,n){var i=n(0),r=n(78),s=n(79),a=i((function(t,e){return t.map((function(t){for(var n,i=e,a=0;a<t.length;){if(null==i)return;n=t[a],i=r(n)?s(n,i):i[n],a+=1}return i}))}));t.exports=a},function(t,e){t.exports=Number.isInteger||function(t){return t<<0===t}},function(t,e,n){var i=n(0),r=n(8),s=i((function(t,e){var n=t<0?e.length+t:t;return r(e)?e.charAt(n):e[n]}));t.exports=s},function(t,e,n){var i=n(6),r=n(17),s=n(81),a=i((function t(e,n,i){return s((function(n,i,s){return r(i)&&r(s)?t(e,i,s):e(n,i,s)}),n,i)}));t.exports=a},function(t,e,n){var i=n(6),r=n(3),s=i((function(t,e,n){var i,s={};for(i in e)r(i,e)&&(s[i]=r(i,n)?t(i,e[i],n[i]):e[i]);for(i in n)r(i,n)&&!r(i,s)&&(s[i]=n[i]);return s}));t.exports=s},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"merge",(function(){return s.a})),n.d(i,"sortBy",(function(){return o.a})),n.d(i,"compose",(function(){return c.a})),n.d(i,"toLower",(function(){return h.a})),n.d(i,"prop",(function(){return p.a})),n.d(i,"reverse",(function(){return g.a})),n.d(i,"mergeDeepLeft",(function(){return v.a}));n(36);new class{constructor(){window.NBBLOG=console.log,console.log=this.log}log(){window.NBBOPTIONS&&window.NBBOPTIONS.debug&&window.NBBLOG.apply(this,arguments)}};n(39);var r=n(11),s=n.n(r),a=n(12),o=n.n(a),l=n(13),c=n.n(l),u=n(16),h=n.n(u),d=n(18),p=n.n(d),f=n(9),g=n.n(f),m=n(19),v=n.n(m),b=n(20);window.RAMDA=i,window.NBBMODULECLASS=class{constructor(t,e){this.name="module",this.label="MODULE",this.ready=!1,this.options=e,this.defaults={},this.event=new b.EventEmitter,this.items=[],t&&(this.parent=t),this.parent&&(this.parent.app&&(this.app=this.parent.app))}on(){this.event.on.apply(this.event,Array.from(arguments))}emit(){this.event.emit.apply(this.event,Array.from(arguments))}get(t,e){return this.items.filter(n=>{if(n.id===t)return e!==n.id})[0]}getF(t,e,n){return this.items.filter(i=>{if(i[t]===e)return n!==i[t]})[0]}toDOM(t){return(new DOMParser).parseFromString(t,"text/html").documentElement.querySelector("body").firstChild}fetch(t,e){return!e&&(e={method:"GET"}),fetch(t,e).then(t=>t.ok?t.json():Promise.reject(t.statusText))}};var x=n(21),y=n.n(x),w=n(22),_=n.n(w),L=n(23),E=n.n(L),I=n(24),O=n.n(I),S=[{name:"c",size:200,media:"(max-width: 1400px)"},{name:"i",size:700,media:"(min-width: 1400px)"}];class B extends NBBMODULECLASS{constructor(t,e,n){super(t,e),this.options=e,this.imageDataUrl=`${this.app.urlImageBase}/${this.options.pathExtracted}`,this.exposeThumbnails(),this.target=this.toDOM(O()({scope:{name:this.options.fileName,thumbnails:this.thumbnails}})),this.parent.target.append(this.target),this.imageElement=this.target.querySelector("img"),this.imageElement.addEventListener("loadstart",t=>{this.target.classList.add("loading")},{once:!0}),this.imageElement.addEventListener("load",()=>{this.target.classList.remove("loading"),this.target.classList.add("loaded"),this.nextImage()},{once:!0}),this.imageElement.onerror=t=>{console.log(">>>>>>>>>>>>>> ERROR",t),this.target.classList.remove("loading"),this.target.classList.add("failed"),this.nextImage()}}exposeThumbnails(){this.thumbnails=[],S.forEach(t=>{this.thumbnails.push({url:encodeURI(`${this.app.urlMediaBase}/${t.name}/${this.options.pathExtracted}`),media:t.media})})}load(){this.findIndex(),this.thumbnailIndex=this.thumbnails.length-1||0,this.imageElement.src=this.thumbnails[this.thumbnailIndex].url}nextImage(){if(!this.parent.parent.folders)return!1;if(this.imageIndex>=this.parent.parent.folders.length)return!1;const t=this.findNextImage();t&&t.load()}findIndex(){this.imageIndex=this.parent.parent.folders.findIndex(t=>t.image?t.image.options.hash===this.options.hash:null)}findNextImage(){if(this.imageIndex+1>=this.parent.parent.folders.length)return!1;const t=this.parent.parent.folders[this.imageIndex+1].image;return t||(this.imageIndex++,this.findNextImage())}}class M extends NBBMODULECLASS{constructor(t,e){super(t,e),this.browser=this.parent.parent.parent,this.label="FOLDERITEM",this.options=e,this.folders=this.options.childs.filter(t=>"folder"===t.type),this.images=this.options.childs.filter(t=>"image"===t.type),this.target=this.toDOM(E()({scope:{name:this.options.folderName,count:{folders:this.folders.length,images:this.images.length}}})),this.target.onclick=t=>this.select(t),this.parent.target.append(this.target),this.exposeThumbnail()}select(t){this.browser.setLocationHash(encodeURI(this.options.pathExtracted))}exposeThumbnail(){this.images=this.options.childs.filter(t=>"image"===t.type),0!==this.images.length&&(this.image=new B(this,this.images[0]))}}class j extends NBBMODULECLASS{constructor(t,e){super(t,e),this.label="FOLDER LISTING",this.options=e,this.target=this.parent.target.querySelector("[data-folders]"),this.set()}set(t){if(this.data=t?t.filter(t=>"folder"===t.type):this.parent.data.data.childs.filter(t=>"folder"===t.type),this.order(),this.folders=[],this.data.length>0){this.data.forEach(t=>{const e=new M(this,t);this.folders.push(e)});const t=this.folders.filter(t=>t.image?t:null)[0];t&&t.image.load()}this.order(),console.log(this.label,"FOLDERS",this.folders.length)}order(t){!t&&(t="folderName"),this.data=ksortObjArray(this.data,t)}remove(){this.data&&delete this.data,this.folders&&delete this.folders}}var A=n(25),N=n.n(A),T=n(26),C=n.n(T);class D extends NBBMODULECLASS{constructor(t,e,n){super(t,e),this.browser=this.parent.parent.parent,this.options=e,this.imageDataUrl=`${this.app.urlImageBase}/${this.options.pathExtracted}`,this.exposeThumbnails(),this.target=this.toDOM(N()({scope:{name:this.options.fileName,thumbnails:this.thumbnails}})),this.target.onclick=t=>this.select(t),this.parent.target.append(this.target),this.imageElement=this.target.querySelector("img"),this.imageElement.addEventListener("loadstart",t=>{this.target.classList.add("loading")},{once:!0}),this.imageElement.addEventListener("load",()=>{this.parent.concurrentImageRequests--,this.target.classList.remove("loading"),this.target.classList.add("loaded"),this.nextImage()},{once:!0}),this.imageElement.onerror=t=>{console.log(">>>>>>>>>>>>>> ERROR",t),this.nextImage(),this.target.classList.remove("loading"),this.target.classList.add("failed")}}select(t){this.browser.setLocationHash(this.options.pathExtracted)}exposeThumbnails(){this.thumbnails=[],S.forEach(t=>{this.thumbnails.push({url:encodeURI(`${this.app.urlMediaBase}/${t.name}/${this.options.pathExtracted}`),media:t.media})})}load(){this.findIndex(),this.drawCountStats(),this.thumbnailIndex=this.thumbnails.length-1||0,this.imageElement.src=this.thumbnails[this.thumbnailIndex].url,this.parent.concurrentImageRequests++,this.parent.concurrentImageRequests<this.parent.maxConcurrentImageRequests-1&&this.nextImage()}nextImage(){if(!this.parent.images)return!1;if(this.imageIndex>=this.parent.images.length)return!1;const t=this.findNextImage();t&&t.load()}findIndex(){this.imageIndex=this.parent.images.findIndex(t=>t.options.hash===this.options.hash)}findNextImage(){if(this.imageIndex+1>=this.parent.images.length)return!1;const t=this.parent.images[this.imageIndex+1];return t||(this.imageIndex++,this.findNextImage())}drawCountStats(){this.coutStatsElement||(this.coutStatsElement=toDOM(C()({scope:{}})),this.target.prepend(this.coutStatsElement),this.numberElement=this.coutStatsElement.querySelector("[data-number]"),this.leftElement=this.coutStatsElement.querySelector("[data-left]"),this.numberElement.innerText=`${this.imageIndex+1} / ${this.parent.images.length}`,this.leftElement.innerText=this.parent.images.length-this.imageIndex-1)}}var U=n(27),R=n.n(U);class q extends NBBMODULECLASS{constructor(t,e){super(t,e),this.label="ITEM LISTING OPTIONS",this.options=e,this.folder=this.parent.parent,this.browser=this.folder.parent,this.isLoading=!1,this.target=this.folder.target.querySelector("[data-files-options]"),this.target.innerHTML=R()(),this.registerButtons(),this.on("loading",()=>{this.isLoading=!0,this.buttons.latest.innerText="LOADING ...",this.buttons.latest.classList.add("loading")}),this.on("data",()=>{this.isLoading=!1,this.buttons.latest.innerText="LATEST",this.buttons.latest.classList.remove("loading")})}registerButtons(){this.buttons={picking:this.target.querySelector("[data-picking-mode]"),selection:{all:this.target.querySelector("[data-selection-all]"),none:this.target.querySelector("[data-selection-none]"),invert:this.target.querySelector("[data-selection-invert]")},latest:this.target.querySelector("[data-load-latest]")},this.buttons.picking.onclick=t=>{},this.buttons.selection.all.onclick=t=>{},this.buttons.selection.none.onclick=t=>{},this.buttons.selection.invert.onclick=t=>{},this.buttons.latest.onclick=t=>this.get()}get(){this.isLoading||this.folder.getLatest()}}class k extends NBBMODULECLASS{constructor(t,e){super(t,e),this.label="ITEM LISTING",this.options=e,this.folder=this.parent,this.maxConcurrentImageRequests=this.folder.maxConcurrentImageRequests||3,this.concurrentImageRequests=this.folder.concurrentImageRequests||0,this.target=this.folder.target.querySelector("[data-files]"),this.optionsElement=new q(this),this.set()}set(t){this.remove(),this.data=t?t.filter(t=>"image"===t.type):this.folder.data.data.childs.filter(t=>"image"===t.type),this.order(),this.images=[],this.data.length>0&&(this.data.forEach(t=>{const e=new D(this,t);this.images.push(e)}),this.images[0].load())}order(t,e){!t&&(t="btime"),!e&&(e="DESC"),this.data=ksortObjArray(this.data,t),"DESC"===e&&this.data.reverse()}remove(){this.data&&delete this.data,this.images&&this.images.forEach(t=>t.target.remove()),this.images&&delete this.images}}class F extends NBBMODULECLASS{constructor(t,e){super(t,e),this.label="LATEST LISTING",this.options=e,this.folder=this.parent,this.browser=this.folder.parent,this.itemListingOptions=this.folder.itemListing.optionsElement,this.target=this.parent.target.querySelector("[data-latest]"),this.on("loading",t=>{this.isLoading=!0,this.itemListingOptions.emit("loading")}),this.on("data",t=>{this.isLoading=!1,this.itemListingOptions.emit("data"),this.folder.itemListing.set(t.data.childs)})}get(){if(this.isLoading)return;let t=this.browser.locationExtracted.join("/"),e=`${this.browser.urlBase}/latest/${t}`;this.emit("loading",e),this.fetch(e).then(t=>this.emit("data",t))}}class P extends NBBMODULECLASS{constructor(t,e){super(t,e),this.label="FOLDER",this.options=e,this.browser=this.parent,this.urlBase=this.app.urlBase,this.urlFolderBase=this.app.urlFolderBase,this.urlImageBase=this.app.urlImageBase,this.urlMediaBase=this.app.urlMediaBase,this.maxConcurrentImageRequests=3,this.concurrentImageRequests=0,this.location=""}set(t){this.data=t,this.location!==this.data.data.pathExtracted&&this.draw()}draw(){this.data.file?!this.target&&this.drawFolder():this.drawFolder()}drawFolder(){this.location=this.data.data.pathExtracted,this.remove(),this.target=this.toDOM(_()({scope:{}})),this.browser.target.append(this.target),this.folderListing=new j(this),this.itemListing=new k(this),this.latestListing=new F(this)}drawImage(){console.log(">>> DRAW IMAGE")}remove(){this.target&&this.target.remove(),this.folderListing&&this.folderListing.remove(),this.itemListing&&this.itemListing.remove()}getLatest(){this.latestListing.get()}}var H=n(28),$=n.n(H);class G extends NBBMODULECLASS{constructor(t,e){super(t,e),this.options=e,this.target=this.toDOM($()({scope:{}})),this.parent.target.append(this.target)}set(t){t&&(this.target.innerHTML=t)}}var z=n(29),K=n.n(z),V=n(30),W=n.n(V);class J extends NBBMODULECLASS{constructor(t,e){super(t,e),this.options=e,this.target=this.toDOM(K()({scope:{}})),this.parent.target.append(this.target)}set(t){this.data=t,this.draw()}flush(){this.items.length>0&&this.items.forEach(t=>t.remove()),this.items=[]}draw(){this.flush();let t="";this.createItem("Home",t),""!==this.data.pathCrumped[0]&&this.data.pathCrumped.forEach((e,n)=>{0===n&&(t=""+e),0!==n&&(t=`${t}/${e}`),this.createItem(e,t)})}createItem(t,e){const n=this.toDOM(W()({scope:{name:t}}));n.uriHash=e,n.onclick=t=>this.select(t),this.target.append(n),this.items.push(n)}select(t){t.preventDefault(),console.log(">>>",t.target.uriHash),this.parent.setLocationHash(encodeURI(t.target.uriHash))}}var X=n(31),Y=n.n(X),Z=n(32),Q=n.n(Z),tt=[{name:"l",media:"(max-width: 1000px)"},{name:"original",media:"(min-width: 1000px)"}];class et extends NBBMODULECLASS{constructor(t,e){super(t,e),this.options=e,this.imageDataUrl=`${this.parent.urlImageBase}/${this.options.pathExtracted}`,this.exposeThumbnails(),this.draw()}draw(){this.target=this.toDOM(Q()({scope:{name:this.options.fileName,thumbnails:this.thumbnails}})),this.parent.target.prepend(this.target),this.imageElement=this.target.querySelector("img"),this.target.classList.add("loading"),this.imageElement.onload=t=>{this.target.classList.remove("loading"),this.target.classList.add("loaded")},this.imageElement.onerror=()=>{}}exposeThumbnails(){this.thumbnails=[],tt.forEach(t=>{this.thumbnails.push({url:encodeURI(`${this.parent.urlMediaBase}/${t.name}/${this.options.pathExtracted}`),media:t.media})})}remove(){this.target&&this.target.remove()}forget(){this.target.classList.add("previous")}}var nt=n(33),it=n.n(nt);class rt extends NBBMODULECLASS{constructor(t,e){super(t,e),this.target=this.toDOM(it()({scope:{}})),this.parent.target.prepend(this.target),this.prevElement=this.target.querySelector("[data-prev]"),this.prevElement.onclick=()=>this.prev(),this.nextElement=this.target.querySelector("[data-next]"),this.nextElement.onclick=()=>this.next(),this.closeElement=this.target.querySelector("[data-close]"),this.closeElement.onclick=()=>this.close(),this.layoutElement=this.target.querySelector("[data-layout]"),this.layoutElement.onclick=()=>this.toggleLayout(),this.prevElement.show=this.nextElement.show=function(){this.classList.remove("hidden")},this.prevElement.hide=this.nextElement.hide=function(){this.classList.add("hidden")}}prev(){let t;t=this.parent.images[this.parent.imageIndex-1]?this.parent.images[this.parent.imageIndex-1].options.pathExtracted:this.parent.images[0].options.pathExtracted,this.parent.parent.setLocationHash(t)}next(){let t;t=this.parent.images[this.parent.imageIndex+1]?this.parent.images[this.parent.imageIndex+1].options.pathExtracted:this.parent.images[this.parent.images.length-1].options.pathExtracted,this.parent.parent.setLocationHash(t)}checkPrevNext(){this.parent.images[this.parent.imageIndex-1]?this.prevElement.show():this.prevElement.hide(),this.parent.images[this.parent.imageIndex+1]?this.nextElement.show():this.nextElement.hide()}close(){this.remove(),this.parent.remove()}remove(){this.target&&this.target.remove()}toggleLayout(){this.parent.stripe?(this.parent.closeStripe(),this.layoutElement.classList.remove("down"),this.layoutElement.classList.add("up")):(this.parent.openStripe(),this.layoutElement.classList.remove("up"),this.layoutElement.classList.add("down"))}}var st=n(34),at=n.n(st),ot=n(35),lt=n.n(ot);class ct extends NBBMODULECLASS{constructor(t,e,n){super(t,e),this.options=e,this.imageDataUrl=`${this.parent.urlImageBase}/${this.options.pathExtracted}`,this.exposeThumbnails(),this.target=this.toDOM(lt()({scope:{name:this.options.fileName,thumbnails:this.thumbnails}})),this.target.onclick=t=>this.select(t),this.parent.target.append(this.target),this.imageElement=this.target.querySelector("img"),this.imageElement.onloadstart=t=>{this.target.classList.add("loading")},this.imageElement.onload=t=>{this.nextImage(),this.target.classList.remove("loading"),this.target.classList.add("loaded")},this.imageElement.onerror=t=>{this.nextImage(),this.target.classList.remove("loading"),this.target.classList.add("failed")}}select(t){this.parent.parent.parent.setLocationHash(this.options.pathExtracted)}exposeThumbnails(){this.thumbnails=[],S.forEach(t=>{this.thumbnails.push({url:encodeURI(`${this.parent.urlMediaBase}/${t.name}/${this.options.pathExtracted}`),media:t.media})})}load(){this.findIndex(),this.thumbnailIndex=this.thumbnails.length-1||0,this.imageElement.src=this.thumbnails[this.thumbnailIndex].url}nextImage(){if(this.imageIndex>=this.parent.images.length)return!1;const t=this.findNextImage();t&&t.load()}findIndex(){this.imageIndex=this.parent.images.findIndex(t=>t.options.hash===this.options.hash)}findNextImage(){if(this.imageIndex+1>=this.parent.images.length)return!1;const t=this.parent.images[this.imageIndex+1];return t||(this.imageIndex++,this.findNextImage())}}class ut extends NBBMODULECLASS{constructor(t,e){super(t,e),console.log(">>> INIT FOLDER STRIPE"),this.urlBase=this.app.urlBase,this.urlFolderBase=this.app.urlFolderBase,this.urlImageBase=this.app.urlImageBase,this.urlMediaBase=this.app.urlMediaBase,this.open()}open(){this.remove(),this.target=this.toDOM(at()({scope:{}})),this.parent.target.prepend(this.target),this.draw()}draw(){this.images=[],this.parent.parent.folder.itemListing.images.forEach(t=>{const e=new ct(this,t.options);this.images.push(e)}),this.images[0].load(),setTimeout(()=>{this.scrollToActive()},1e3)}close(){this.remove()}remove(){this.target&&this.target.remove()}scrollToActive(){let t=this.images[this.parent.imageIndex-1].target;!t&&(t=this.images[this.parent.imageIndex].target),this.target.scrollTo({top:t.offsetTop,left:0,behavior:"smooth"}),this.unselectAll(),this.images[this.parent.imageIndex].target.classList.add("active")}unselectAll(){this.images.forEach(t=>t.target.classList.remove("active"))}}class ht extends NBBMODULECLASS{constructor(t,e){super(t,e),this.options=e,this.browser=this.parent,this.urlBase=this.app.urlBase,this.urlFolderBase=this.app.urlFolderBase,this.urlImageBase=this.app.urlImageBase,this.urlMediaBase=this.app.urlMediaBase}set(t){this.data=t,this.draw()}draw(){this.data.file?"image"===this.data.file.type&&this.open():this.remove()}open(){this.target||(this.target=this.toDOM(Y()({scope:{data:this.data}})),this.browser.target.prepend(this.target),this.images=this.browser.folder.itemListing.images,this.controls=new rt(this)),document.querySelector("body").style.overflow="hidden",this.show()}close(){this.closeStripe(),this.remove()}remove(){if(this.target){this.target.remove(),delete this.target,this.closeStripe();let t=this.images[this.imageIndex].options.pathExtracted.split("/");t.pop(),t=t.join("/"),this.browser.setLocationHash(t)}document.querySelector("body").style.overflow="auto"}show(){this.previousImage&&this.previousImage.remove(),this.image&&(this.image.forget(),this.previousImage=Object.assign(this.image,{})),this.image=new et(this,this.data.file),this.findImageIndex()}prev(){this.controls.prev()}next(){this.controls.next()}findImageIndex(){this.imageIndex=this.images.findIndex(t=>t.options.filePath===this.image.options.filePath),this.controls.checkPrevNext(),this.stripe&&this.stripe.scrollToActive()}openStripe(){this.stripe&&this.stripe.remove(),this.stripe=new ut(this),this.target.classList.add("stripe")}closeStripe(){this.stripe&&(this.stripe.remove(),delete this.stripe),this.target&&this.target.classList.remove("stripe")}}class dt extends NBBMODULECLASS{constructor(t,e){return super(t,e),new Promise((t,n)=>{this.label="BROWSER",this.options=e,this.urlBase=this.app.urlBase,this.urlFolderBase=this.app.urlFolderBase,this.urlImageBase=this.app.urlImageBase,this.urlMediaBase=this.app.urlMediaBase,window.addEventListener("hashchange",()=>this.getLocationHash(),!1),this.app.on("ready",()=>this.getLocationHash()),this.on("hashchange",()=>this.get()),this.on("data",t=>{console.log(">>> GOT DATA",t.data.type,t.data.id),this.pageTitle.set(t.data.folderName),this.breadcrump.set(t.data),this.folder.set(t),this.imageViewer.set(t)}),this.target=this.toDOM(y()({scope:{}})),this.parent.target.append(this.target),this.pageTitle=new G(this),this.breadcrump=new J(this),this.folder=new P(this),this.imageViewer=new ht(this),t()})}get(){this.stopLoadingAllResources();let t=this.locationExtracted.join("/"),e=`${this.urlBase}/funnel/${t}`,n=!1;if(!this.folder.target){console.log(">>> NOTHING HERE"),n=e,this.locationExtracted.pop();const t=this.locationExtracted.join("/");e=`${this.urlBase}/funnel/${t}`}this.fetch(e).then(t=>{this.emit("data",t),n&&this.fetch(n).then(t=>{this.emit("data",t)})})}getLocationHash(){const t=new URL(document.location);this.locationHash=t.hash.replace(/#/,""),console.log(this.label,"GOT LOCATION HASH",this.locationHash,this.locationExtracted)}setLocationHash(t){window.location.hash="#"+t}stopLoadingAllResources(){}get locationHash(){return this._locationHash}set locationHash(t){this._locationHash=t,this.locationExtracted=this.locationHash.split("/"),this.emit("hashchange")}}class pt extends NBBMODULECLASS{constructor(t){return super(),new Promise((e,n)=>(this.label="APP",console.log(this.label,"INIT"),this.app=this,this.options=t,this.apiBaseUrl=this.options.apiBaseUrl||""+window.location.origin,this.urlBase=this.apiBaseUrl+"/v1",this.urlFolderBase=this.urlBase+"/folder",this.urlImageBase=this.urlBase+"/image",this.urlMediaBase=this.urlBase+"/media",this.rootElement=this.options.target,this.target=this.rootElement,this.on("ready",()=>e()),new dt(this).then(t=>{this.browser=t,this.emit("ready")})))}}window.NBB=pt}]);